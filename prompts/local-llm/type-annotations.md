# Add Type Annotations

Add Python type annotations to this code.

Rules:
- Add parameter types
- Add return types
- Use `Optional[]` for nullable params
- Use `list[]`, `dict[]` for containers (Python 3.9+ style)
- Import types from `typing` if needed (e.g., `Any`, `Callable`)
- Do not change any logic
- Do not add docstrings

Output ONLY the annotated code.

---

Code:
```python
{PASTE CODE HERE}
```
