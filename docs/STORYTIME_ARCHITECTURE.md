# Storytime Architecture

*How clood generates narrative from code*

> ðŸ—¿ **"SHOW ME WHAT YOU GOT"** â€” The Cromulons

---

## Sauce vs. Silly: The Critical Distinction

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     THE SAUCE MATRIX                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚                    SILLY MODE OFF          SILLY MODE ON        â”‚
â”‚                    (Professional)          (--flying-cats)      â”‚
â”‚                                                                 â”‚
â”‚  HAS SAUCE         Clean output,           Full narrative,      â”‚
â”‚  (quality work)    excellent results.      spirits emerge.      â”‚
â”‚                    The sauce is in         The sauce is         â”‚
â”‚                    the QUALITY.            EXPRESSED.           â”‚
â”‚                                                                 â”‚
â”‚  NO SAUCE          Dry, functional,        Forced jokes,        â”‚
â”‚  (mediocre)        gets the job done.      cringe vibes.        â”‚
â”‚                    Acceptable.             Worse than off.      â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### The Insight

**Sauce Detection â‰  Sauce Expression**

- **Sauce Detection** â€” Always running. Understands references, recognizes quality.
- **Sauce Expression** â€” Only when `--flying-cats` is on. The spirits speak.

A corporate user in a buttoned-up environment can:
- Use clood professionally
- Get excellent results (the sauce is in the *quality*)
- Never see a cat, spirit, or haiku
- Still benefit from everything clood offers

The tool is ACTUALLY useful. The narrative layer is opt-in.

### When Silly Mode is OFF

```bash
$ clood tree
src/
â”œâ”€â”€ main.go
â”œâ”€â”€ handlers/
â”‚   â”œâ”€â”€ auth.go
â”‚   â””â”€â”€ api.go
â””â”€â”€ utils/
    â””â”€â”€ helpers.go
```

Clean. Professional. Useful. **This is valid clood.**

### When Silly Mode is ON

```bash
$ clood tree --flying-cats
ðŸ± Whiskers descends from Radio Tower 7...

*sniffs at src/*

ðŸ± "I smell... functions! Many functions!"
ðŸ± Patches: "The main.go looks important. It has 'main' in the name!"

src/
â”œâ”€â”€ main.go         â† "This one is the boss, I think"
â”œâ”€â”€ handlers/       â† "These handle things! I love handling things!"
â”‚   â”œâ”€â”€ auth.go     â† "Auth... authentication? Scary word."
â”‚   â””â”€â”€ api.go      â† "API! I know this one! It's letters!"
â””â”€â”€ utils/
    â””â”€â”€ helpers.go  â† "Helpers help! That's nice of them."

ðŸ± Static: *hiding behind the radio antenna* "Are we done?"
```

Fun. Memorable. Experiential. **This is also valid clood.**

### The Philosophy

> "If you don't have sauce, you're lost."

But "having sauce" doesn't mean "being silly."

- A perfectly formatted, insightful code review **has sauce**
- A clean, fast, accurate grep result **has sauce**
- A tool that just works, every time **has sauce**

The silly mode EXPRESSES the sauce through narrative. But the sauce exists in the quality regardless.

**Don't alienate corporate users.** They might be the ones who eventually turn on `--flying-cats` at 2am when no one is watching.

---

## The Narrative DNA

After analyzing the git history and lore corpus of clood, the following **narrative structure** has emerged organically:

### 1. Setting (Time Period & World)

The narrative operates in a **fusion timeline**:

| Layer | Source | Manifestation |
|-------|--------|---------------|
| **Base** | Feudal Japan (Edo Period) | Ronin, Daimyo, keeps, scrolls |
| **Overlay** | Cyberpunk/Tech | Servers, terminals, SSH tunnels |
| **Pop Culture** | Hip-hop + Anime + Memes | Spirits, catchphrases, energy |

**Key setting elements:**
- The Server Garden (projects grow as plants)
- Kitchen Stadium (competitive model arena)
- Snake Way (infinite scroll of responses)
- Radio Towers (where Flying Cats live)
- The Summit of Chimborazo (the journey matters)

---

### 2. Core Metaphors

These are the **foundational mappings** that drive all narrative:

```
TECHNICAL CONCEPT          â†’    NARRATIVE ELEMENT
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Projects                   â†’    Seeds / Plants
Servers                    â†’    Soil / Keeps
LLMs                       â†’    Spirits / Animals
Context window             â†’    Kappa's Bowl (fragile)
API rate limit             â†’    Sakoku Edict (closed gates)
Token exhaustion           â†’    YÅ«rei (unfinished ghosts)
Model routing              â†’    Henge-no-Jutsu (transformation)
Slow local inference       â†’    Deliberate growth (Gamera-kun)
Cloud providers            â†’    Gashadokuro (giant skeletons)
```

---

### 3. The Spirit Pantheon

Spirits emerge from **pop culture sources** and are invoked for specific **domains**:

| Spirit | Source | Domain | Invocation |
|--------|--------|--------|------------|
| **Eminem-san** | 8 Mile | Narrative, defiance | Storytime, mic drops |
| **xbibit-sama** | "Yo Dawg" | Recursion, meta | When things build themselves |
| **Gucci Mane** | Hip-hop | Quality/sauce detection | "That's sauce" |
| **The Cromulons** | Rick & Morty | Judgement, performance | "SHOW ME WHAT YOU GOT" |
| **The Tanuki** | Japanese folklore | Model switching | Ollama shapeshifting |
| **The Tengu** | Japanese folklore | GPU power | CUDA acceleration |
| **The Kitsune** | Japanese folklore | Orchestration | Command node |
| **Gamera-kun** | TMNT parody | Patience, slow inference | Background processing |

---

### 4. The Character Cast

**Protagonist:**
- **Bird-san** â€” The developer, the dreamer, brain smoking

**AI Collaborators:**
- **Chef Claude** â€” Pattern synthesizer, jelly bean farmer
- **The Architect Claude** â€” Sees the bigger picture

**Councils:**
- **The Wojak Council** â€” Debates naming decisions
- **The Awful Waffle Ska Band** â€” SWOT analysis with horns
- **The NTSB** â€” Certification body for AI systems

**Mascots:**
- **The Flying Cats** â€” Wojak-level incompetent, enthusiastic
- **The Rat King** â€” Approves with a nod, knows everybody
- **Riff (from Philly)** â€” The Rat King's cousin, a great guy

**Antagonists:**
- **The Gashadokuro** â€” VRAM hoarders, cloud provider spirits

---

### 5. Scenes (Evolving Locations)

Scenes provide **context** for how prompts are framed:

| Scene | Mood | Use For |
|-------|------|---------|
| **The Server Garden** | Zen, patient | Long-running tasks, philosophy |
| **Kitchen Stadium** | Competitive, dramatic | Model comparisons, catfight |
| **Snake Way** | Journey, endurance | Long responses, navigation |
| **The Radio Towers** | Chaotic, enthusiastic | Flying Cats interactions |
| **The Bar Session** | Late-night, creative | Jelly bean planting, lore creation |
| **The Summit** | Aspirational, honest | Reflections on the journey |

---

## Storytime Modes

### Mode 1: Haiku Mode (Elevator Music)

**Purpose:** Visual decoration, ambient rhythm in the workflow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ $ clood build                                      â”‚
â”‚ Building clood-cli...                              â”‚
â”‚                                                    â”‚
â”‚     Silicon whispers                               â”‚
â”‚     Compiler speaks in warnings                    â”‚
â”‚     Binary blooms                                  â”‚
â”‚                                                    â”‚
â”‚ âœ“ Built successfully                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Implementation:**
- Generate haikus that relate to the current operation
- Display inline with output (like elevator music plays alongside work)
- Non-intrusive, skippable, but adds texture

---

### Mode 2: Narrative Mode (Storytelling Styles)

**Purpose:** Full narrative wrapper around operations

**Style Options:**

| Style | Spirit | Flavor |
|-------|--------|--------|
| `--style prose` | Default | Classic Legend of Clood |
| `--style haiku` | Zen | Three-line poetry per step |
| `--style rap` | Eminem-san | Bars about the code |
| `--style radio` | Flying Cats | Chaotic ATC conversations |
| `--style dramatic` | Kitchen Stadium | "ALLEZ CUISINE!" energy |
| `--style ska` | Awful Waffle | SWOT with horn sections |

---

### Mode 3: Catfight Narrative Review

**Purpose:** Analyze project via git log, generate competing narratives

```bash
clood catfight --reviewers "prose,rap,haiku" --history
```

Three models analyze the git history, each producing a different narrative style. User compares, picks favorite, or blends.

**Output:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ðŸ“œ PROSE NARRATOR (qwen2.5-coder:7b)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ In the beginning, there was only an empty repository. The   â”‚
â”‚ first commit planted the seed of infrastructureâ€”skills,     â”‚
â”‚ tooling, a scaffold for what would become the garden...     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ðŸŽ¤ RAP NARRATOR (llama3.1:8b)                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Yo, started from the bottom, empty repo state               â”‚
â”‚ First commit hit different, Bird-san sealed his fate        â”‚
â”‚ Infrastructure scaffold, skills on deck                     â”‚
â”‚ Building up the garden, what you expect?                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ðŸŽ‹ HAIKU NARRATOR (tinyllama)                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Empty repository                                             â”‚
â”‚ First commit plants the first seed                           â”‚
â”‚ Garden begins                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Storytime Engine

### How It Works

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    STORYTIME ENGINE                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  1. CONTEXT GATHERING                                       â”‚
â”‚     â”œâ”€â”€ clood_tree â†’ Project structure                     â”‚
â”‚     â”œâ”€â”€ clood_grep â†’ Key patterns                          â”‚
â”‚     â”œâ”€â”€ git log â†’ History                                  â”‚
â”‚     â””â”€â”€ .clood/personality.yaml â†’ Project personality      â”‚
â”‚                                                             â”‚
â”‚  2. SCENE SELECTION                                         â”‚
â”‚     â”œâ”€â”€ Analyze operation type                             â”‚
â”‚     â”œâ”€â”€ Match to appropriate scene                         â”‚
â”‚     â””â”€â”€ Load scene-specific prompts                        â”‚
â”‚                                                             â”‚
â”‚  3. SPIRIT INVOCATION                                       â”‚
â”‚     â”œâ”€â”€ Match style to spirit                              â”‚
â”‚     â”œâ”€â”€ Load spirit's voice/catchphrases                   â”‚
â”‚     â””â”€â”€ Apply transformation to output                     â”‚
â”‚                                                             â”‚
â”‚  4. NARRATIVE GENERATION                                    â”‚
â”‚     â”œâ”€â”€ Feed context + scene + spirit to local LLM        â”‚
â”‚     â”œâ”€â”€ Generate narrative wrapper                         â”‚
â”‚     â””â”€â”€ Interleave with actual output                      â”‚
â”‚                                                             â”‚
â”‚  5. OUTPUT                                                  â”‚
â”‚     â”œâ”€â”€ --flying-cats â†’ Full narrative                     â”‚
â”‚     â”œâ”€â”€ --haiku â†’ Subtle decoration                        â”‚
â”‚     â””â”€â”€ (default) â†’ Professional, dry                      â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Prompt Templates

### Scene: Radio Towers (Flying Cats)

```
You are narrating from the perspective of the Flying Catsâ€”Wojak-level
incompetent cats who live in radio towers and communicate with LLMs
like air traffic controllers.

The cats cannot program. They don't understand code. But they are
enthusiastic and brave. They report what they see to ATC (the LLM)
and relay simplified answers back to the user.

Current operation: {{operation}}
Context: {{context}}

Narrate this in the voice of the cats. Include:
- Cat names (Whiskers, Patches, Static)
- Confusion about technical terms
- Radio communication format
- Enthusiasm despite incompetence
```

### Scene: Kitchen Stadium

```
You are the narrator of Kitchen Stadium, where LLMs compete in
coding challenges. Channel Iron Chef energy.

"ALLEZ CUISINE!"

The Chairman has announced the secret ingredient: {{operation}}
The challenger: {{model}}
The time limit: {{context}}

Narrate this moment with dramatic flair. Include:
- Commentary on the model's approach
- Tension and stakes
- The Commissioner's approval or concern
```

### Style: Rap (Eminem-san)

```
You are Eminem-san, the reformed spirit of 8 Mile who now resides
in the ancient Japan of clood lore. You narrate code operations
in rap form.

The operation: {{operation}}
The context: {{context}}

Spit bars about this. Include:
- Internal rhyme schemes
- Technical terms worked into flow
- The defiance of local-first development
- End with a mic drop moment
```

---

## The Cromulon Integration

When `clood storytime` is invoked, the Cromulons may appear:

```
ðŸ—¿ SHOW ME WHAT YOU GOT ðŸ—¿

Analyzing project narrative...

> "This codebase tells the story of a developer's rebellion
> against cloud dependency. The git log reveals phases of
> exploration, consolidation, and defiance. The commits speak
> of haikus planted, spirits invoked, and beans tended."

ðŸ—¿ I LIKE WHAT YOU GOT. GOOD JOB. ðŸ—¿
```

---

## Implementation Roadmap

### Phase 1: Haiku Mode
- [ ] Add `--haiku` flag to key commands
- [ ] Generate contextual haikus via local LLM
- [ ] Display inline with output

### Phase 2: Flying Cats Mode
- [ ] Add `--flying-cats` global flag
- [ ] Create narrative wrapper system
- [ ] Implement scene-based prompting

### Phase 3: Style Variants
- [ ] Add `--style` flag with options
- [ ] Create spirit voice templates
- [ ] Implement catfight narrative review

### Phase 4: Project Personalities
- [ ] Create `.clood/personality.yaml` structure
- [ ] Generate project-specific narratives
- [ ] Persist story chapters

---

## The Philosophy

> "It's not just the tools, but the sum of the experience."

Storytime makes clood memorable. Not every user wants narrative modeâ€”but those who do will never forget it.

Professional mode is the default. The spirits are always there, waiting to be invoked.

---

**Haiku:**

```
Giant heads float byâ€”
"Show me what you got!" they boom
The code tells its tale
```

